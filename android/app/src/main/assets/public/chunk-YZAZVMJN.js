import{f as D,h as g,n as v,q as f,t as a}from"./chunk-7O27EJNM.js";import{j as d,k as m,l as h,p as u,q as i,s as p,v as l}from"./chunk-YFH255HC.js";import{i as s}from"./chunk-6SXTDW4T.js";var j=(()=>{let o=class o{constructor(e,r){this.auth=e,this.firestore=r,console.log("AccountService initialized"),this.authState$=g(this.auth),this.userData$=this.authState$.pipe(i(t=>console.log("Auth state changed:",t?t.uid:"Logged out")),u(t=>{if(t){let n=a(this.firestore,"users",t.uid);return f(n,{idField:"uid"})}else return d(null)}),i(t=>console.log("UserData emitted:",t))),this.vendorData$=this.authState$.pipe(i(t=>console.log("Auth state changed for vendor data fetch:",t?t.uid:"Logged out")),u(t=>{if(t){let n=a(this.firestore,"vendors",t.uid);return f(n,{idField:"uid"})}else return d(null)}),i(t=>console.log("VendorData emitted:",t))),this.combinedAccountData$=h([this.userData$,this.vendorData$]).pipe(m(([t,n])=>t?{userData:t,vendorData:n}:null),i(t=>console.log("Combined Account Data emitted:",t)))}updateUserData(e,r){return s(this,null,function*(){if(!e){console.error("Cannot update user data: UID is missing.");return}let t=a(this.firestore,"users",e);console.log(`Attempted to update user document for UID: ${e}`)})}updateVendorData(e,r){return s(this,null,function*(){if(!e){console.error("Cannot update vendor data: UID is missing.");return}let t=a(this.firestore,"vendors",e);console.log(`Attempted to update vendor document for UID: ${e}`)})}createVendorData(e,r){return s(this,null,function*(){if(!e){console.error("Cannot create vendor data: UID is missing.");return}let t=a(this.firestore,"vendors",e);console.log(`Attempted to create/set vendor document for UID: ${e}`)})}};o.\u0275fac=function(r){return new(r||o)(l(D),l(v))},o.\u0275prov=p({token:o,factory:o.\u0275fac,providedIn:"root"});let c=o;return c})();export{j as a};
